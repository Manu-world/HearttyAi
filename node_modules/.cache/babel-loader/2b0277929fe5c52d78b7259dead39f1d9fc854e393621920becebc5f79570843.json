{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport jwt_decode from \"jwt-decode\"; // Corrected import statement\n\nexport const useAuth = () => {\n  _s();\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\n  const [userRole, setUserRole] = useState(\"\");\n  useEffect(() => {\n    if (token) {\n      try {\n        const decodedToken = jwt_decode(token);\n        // Assuming the decoded token has a 'role' property\n        if (decodedToken && decodedToken.role) {\n          setUserRole(decodedToken.role);\n        }\n      } catch (error) {\n        // Handle decoding errors here if necessary\n        console.error(\"Error decoding token:\", error);\n      }\n    }\n  }, [token]);\n\n  // Update the token in the local storage\n  useEffect(() => {\n    localStorage.setItem(\"token\", token);\n  }, [token]);\n  return {\n    token,\n    userRole\n  };\n};\n_s(useAuth, \"ytpanaBp2AkKsLcNsfywxN2nZJk=\");","map":{"version":3,"names":["useState","useEffect","jwt_decode","useAuth","_s","token","setToken","localStorage","getItem","userRole","setUserRole","decodedToken","role","error","console","setItem"],"sources":["/home/manu/Documents/heartyAi/frontend/src/provider/useAuth.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport jwt_decode from \"jwt-decode\"; // Corrected import statement\n\nexport const useAuth = () => {\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\n  const [userRole, setUserRole] = useState(\"\");\n\n  useEffect(() => {\n    if (token) {\n      try {\n        const decodedToken = jwt_decode(token);\n        // Assuming the decoded token has a 'role' property\n        if (decodedToken && decodedToken.role) {\n          setUserRole(decodedToken.role);\n        }\n      } catch (error) {\n        // Handle decoding errors here if necessary\n        console.error(\"Error decoding token:\", error);\n      }\n    }\n  }, [token]);\n\n  // Update the token in the local storage\n  useEffect(() => {\n    localStorage.setItem(\"token\", token);\n  }, [token]);\n\n  return { token, userRole };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,UAAU,MAAM,YAAY,CAAC,CAAC;;AAErC,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAACO,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;EACjE,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACd,IAAII,KAAK,EAAE;MACT,IAAI;QACF,MAAMM,YAAY,GAAGT,UAAU,CAACG,KAAK,CAAC;QACtC;QACA,IAAIM,YAAY,IAAIA,YAAY,CAACC,IAAI,EAAE;UACrCF,WAAW,CAACC,YAAY,CAACC,IAAI,CAAC;QAChC;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACd;QACAC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC/C;IACF;EACF,CAAC,EAAE,CAACR,KAAK,CAAC,CAAC;;EAEX;EACAJ,SAAS,CAAC,MAAM;IACdM,YAAY,CAACQ,OAAO,CAAC,OAAO,EAAEV,KAAK,CAAC;EACtC,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAEX,OAAO;IAAEA,KAAK;IAAEI;EAAS,CAAC;AAC5B,CAAC;AAACL,EAAA,CAzBWD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}